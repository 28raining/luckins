<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luckins Wine Store</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div class="header-content">
        <div class="logo">
          <img
            src="images/Luckins-Logo_white_highbevel.gif"
            alt="Luckins Logo"
          />
        </div>
        <div class="welcome-message">
          <h1>Welcome to Luckins Wine Store</h1>
          <p class="welcome-tagline">
            Located in the heart of Great Dunmow, a beautiful market town in
            Essex, England
          </p>
        </div>
      </div>
    </header>

    <!-- Contact Bar -->
    <div class="contact-bar">
      <span>
        <em>01371 872839</em>
        <em>9 Market Place, Great Dunmow, CM6 1AX</em>
        <em>luckinswinestore@gmail.com</em>
      </span>
    </div>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content" id="hero-content">
        <p class="loading">Loading content...</p>
      </div>
      <div class="hero-image">
        <img src="images/shop_3.jpg" alt="Wine inside Luckins" />
      </div>
    </section>

    <section class="wrapper">
      <!-- Hours and Location Section -->
      <section class="hours-and-map-section">
        <div class="hours-and-map">
          <div class="opening-hours-container">
            <h3>Opening Hours</h3>
            <div id="opening-hours" class="loading">
              Loading opening hours...
            </div>
          </div>
          <div class="map-container">
            <h3>Find Us</h3>
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2463.317780570692!2d0.3620775!3d51.8734116!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47d88d3f66720a7f%3A0x369b2ad854ccad3!2sLuckin&#39;s%20Wine%20Store!5e0!3m2!1sen!2suk!4v1767107062594!5m2!1sen!2suk"
              width="600"
              height="450"
              style="border: 0"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            ></iframe>
          </div>
        </div>
      </section>

    </section>

    <footer class="contact-bar">
        <span>
          <em>01371 872839</em>
          <em>9 Market Place, Great Dunmow, CM6 1AX</em>
          <em>luckinswinestore@gmail.com</em>
        </span>
  
    </footer>

    <script src="opening-hours.js"></script>
    <script>
      // Fetch and display Luckins content from API
      const API_BASE = 'https://punch-bowl.william-kelsey.workers.dev';
      
      async function loadHeroContent() {
        const heroContentDiv = document.getElementById('hero-content');
        
        try {
          // Fetch both title and description
          const [titleResponse, descriptionResponse] = await Promise.all([
            fetch(`${API_BASE}/api/content/luckins_title`),
            fetch(`${API_BASE}/api/content/luckins_description`)
          ]);
          
          const titleData = await titleResponse.json();
          const descriptionData = await descriptionResponse.json();
          
          const title = titleData.page_text || '';
          const description = descriptionData.page_text || '';
          
          // Build HTML content
          let html = '';
          
          if (title) {
            html += `<h2 class="lead">${title}</h2>`;
          }
          
          if (description) {
            // Split description by newlines to preserve formatting
            const descriptionLines = description.split('\n').filter(line => line.trim());
            descriptionLines.forEach(line => {
              html += `<p>${line}</p>`;
            });
          }
          
          heroContentDiv.innerHTML = html;
          heroContentDiv.classList.remove('loading');
        } catch (error) {
          console.error('Error loading hero content:', error);
        }
      }
      // Load content when page loads
      loadHeroContent();
    </script>
  </body>
</html>
